CREATE TABLE ACTIVIDADES (CODIGO_ACT INTEGER NOT NULL, DESCRIPCION VARCHAR(255), FECHA_FIN DATETIME, FECHA_INICIO DATETIME, NOMBRE VARCHAR(255), PLAZAS INTEGER NOT NULL, TIPO VARCHAR(255), ONG_CODIGO_ONG INTEGER NOT NULL, PRIMARY KEY (CODIGO_ACT))
CREATE TABLE USUARIO (DNI VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), APELLIDO1 VARCHAR(255) NOT NULL, APELLIDO2 VARCHAR(255) NOT NULL, DIRECCION VARCHAR(255), EMAIL VARCHAR(255) NOT NULL, NOMBRE VARCHAR(255) NOT NULL, PASSWORD VARCHAR(255) NOT NULL, NUM_EXPEDIENTE INTEGER, NUM_DOCENTE INTEGER, PRIMARY KEY (DNI))
CREATE TABLE ONG (CODIGO_ONG INTEGER NOT NULL, DESCRIPCION VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, ONGS_PROFESOR_DNI VARCHAR(255), PRIMARY KEY (CODIGO_ONG))
CREATE TABLE VALORACIONACTIVIDAD (DTYPE VARCHAR(31), CONTENIDO VARCHAR(255), FECHA DATETIME, PUNTUACION INTEGER NOT NULL, ACTIVIDAD_CODIGO_ACT INTEGER NOT NULL, ALUMNO_DNI VARCHAR(255) NOT NULL, PROFESOR_DNI VARCHAR(255), PRIMARY KEY (ACTIVIDAD_CODIGO_ACT, ALUMNO_DNI))
CREATE TABLE jnd_usuario_actividad (actividad_fk INTEGER NOT NULL, usuario_fk VARCHAR(255) NOT NULL, PRIMARY KEY (actividad_fk, usuario_fk))
ALTER TABLE ACTIVIDADES ADD CONSTRAINT FK_ACTIVIDADES_ONG_CODIGO_ONG FOREIGN KEY (ONG_CODIGO_ONG) REFERENCES ONG (CODIGO_ONG)
ALTER TABLE ONG ADD CONSTRAINT FK_ONG_ONGS_PROFESOR_DNI FOREIGN KEY (ONGS_PROFESOR_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE VALORACIONACTIVIDAD ADD CONSTRAINT FK_VALORACIONACTIVIDAD_ALUMNO_DNI FOREIGN KEY (ALUMNO_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE VALORACIONACTIVIDAD ADD CONSTRAINT FK_VALORACIONACTIVIDAD_PROFESOR_DNI FOREIGN KEY (PROFESOR_DNI) REFERENCES USUARIO (DNI)
ALTER TABLE VALORACIONACTIVIDAD ADD CONSTRAINT FK_VALORACIONACTIVIDAD_ACTIVIDAD_CODIGO_ACT FOREIGN KEY (ACTIVIDAD_CODIGO_ACT) REFERENCES ACTIVIDADES (CODIGO_ACT)
ALTER TABLE jnd_usuario_actividad ADD CONSTRAINT FK_jnd_usuario_actividad_usuario_fk FOREIGN KEY (usuario_fk) REFERENCES USUARIO (DNI)
ALTER TABLE jnd_usuario_actividad ADD CONSTRAINT FK_jnd_usuario_actividad_actividad_fk FOREIGN KEY (actividad_fk) REFERENCES ACTIVIDADES (CODIGO_ACT)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
